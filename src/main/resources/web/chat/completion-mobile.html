<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>Easy Chat Mobile</title>
  <link rel="stylesheet" href="/css/completion-mobile.css" />
</head>

<body>
  <div class="app">
    <div class="header">
      <button id="topicToggle" class="btn icon-btn ghost" type="button" aria-label="page.chat.completion.drawer.tab.topics" data-i18n="page.chat.completion.drawer.tab.topics" data-i18n-attr="aria-label">üè∑</button>
      <div class="chat-title">
        <button id="chatTitleTag" class="title-input title-tag" type="button" aria-label="page.chat.completion.aria.open_settings" data-i18n="page.chat.completion.aria.open_settings" data-i18n-attr="aria-label">
          <span id="chatTitleMain" class="title-tag-main"></span>
        </button>
        <input id="titleInput" class="title-input is-hidden" type="text" placeholder="page.chat.completion.placeholder.role_name_autosave" data-i18n="page.chat.completion.placeholder.role_name_autosave" data-i18n-attr="placeholder" tabindex="-1" aria-hidden="true" />
      </div>
      <button id="sessionsToggle" class="btn icon-btn ghost" type="button" aria-label="page.chat.completion.action.sessions" data-i18n="page.chat.completion.action.sessions" data-i18n-attr="aria-label">‚ò∞</button>
    </div>

    <div id="chatList" class="chat-list"></div>

    <div class="composer">
      <div class="model-row">
        <div class="pill">
          <label for="modelSelect" data-i18n="page.chat.completion.label.model">page.chat.completion.label.model</label>
          <select id="modelSelect"></select>
          <button id="refreshModels" class="btn" type="button" data-i18n="common.refresh">common.refresh</button>
        </div>
        <div>
        	<button id="kvCacheToggle" class="btn icon-btn ghost" type="button" title="page.chat.completion.tooltip.kv_cache" data-i18n="page.chat.completion.tooltip.kv_cache" data-i18n-attr="title">üíæ</button>
        	<button id="mcpToolsToggle" class="btn icon-btn ghost" type="button" title="page.chat.completion.tooltip.mcp_tools" data-i18n="page.chat.completion.tooltip.mcp_tools" data-i18n-attr="title">üîå</button>
        </div>
        
        <div class="toggle">
          <input id="autoScroll" type="checkbox" checked />
          <label for="autoScroll" class="hint" data-i18n="page.chat.completion.label.auto_scroll">page.chat.completion.label.auto_scroll</label>
        </div>
        <div class="toggle">
          <input id="streamToggle" type="checkbox" checked />
          <label for="streamToggle" class="hint" data-i18n="page.chat.completion.label.stream">page.chat.completion.label.stream</label>
        </div>
        <div class="toggle">
          <input id="thinkingToggle" type="checkbox" checked />
          <label for="thinkingToggle" class="hint" data-i18n="page.chat.completion.label.thinking">page.chat.completion.label.thinking</label>
        </div>
        <div class="toggle">
          <input id="webSearchToggle" type="checkbox" />
          <label for="webSearchToggle" class="hint" data-i18n="page.chat.completion.label.web_search">page.chat.completion.label.web_search</label>
        </div>
        <button id="clearChat" class="btn" type="button" data-i18n="page.chat.completion.action.clear">page.chat.completion.action.clear</button>
        
      </div>

      <div id="settingsPanel" class="settings">
        <div class="settings-head">
          <div class="settings-title" data-i18n="page.chat.completion.settings.mobile.title">page.chat.completion.settings.mobile.title</div>
          <button id="closeSettings" class="btn icon-btn" type="button" aria-label="common.close" data-i18n="common.close" data-i18n-attr="aria-label">√ó</button>
        </div>
        <div class="settings-body">
          <div class="section-title" id="modelSection" data-i18n="page.chat.completion.settings.mobile.section.core">page.chat.completion.settings.mobile.section.core</div>
          <div class="setting avatar-setting">
            <label data-i18n="page.chat.completion.settings.role.avatar">page.chat.completion.settings.role.avatar</label>
            <div class="avatar-row">
              <div id="avatarSettingPreview" class="avatar clickable" title="page.chat.completion.settings.role.avatar_preview_title" data-i18n="page.chat.completion.settings.role.avatar_preview_title" data-i18n-attr="title">AI</div>
              <button id="avatarSettingUpload" class="btn" type="button" data-i18n="page.chat.completion.action.change">page.chat.completion.action.change</button>
            </div>
          </div>
          <div class="setting">
            <label for="completionTitleSetting" data-i18n="page.chat.completion.settings.role.name">page.chat.completion.settings.role.name</label>
            <input id="completionTitleSetting" type="text" placeholder="page.chat.completion.settings.role.name_placeholder" data-i18n="page.chat.completion.settings.role.name_placeholder" data-i18n-attr="placeholder" />
          </div>
          <div class="setting">
            <label for="apiModelSelect" data-i18n="page.chat.completion.settings.api.endpoint">page.chat.completion.settings.api.endpoint</label>
            <select id="apiModelSelect">
              <option value="1">/v1/chat/completions</option>
              <option value="0">/v1/completions</option>
            </select>
          </div>
          <div class="setting">
            <label for="userName" data-i18n="page.chat.completion.settings.user.nickname">page.chat.completion.settings.user.nickname</label>
            <input id="userName" type="text" placeholder="page.chat.completion.settings.user.nickname_placeholder" data-i18n="page.chat.completion.settings.user.nickname_placeholder" data-i18n-attr="placeholder" />
          </div>
          <div class="setting">
            <label for="maxTokens">max_tokens</label>
            <input id="maxTokens" type="number" value="512" min="1" max="32768" />
          </div>
          <div class="setting">
            <label for="temperature">temperature</label>
            <input id="temperature" type="number" value="0.7" step="0.1" min="0" max="2" />
          </div>
          <div class="setting">
            <label for="topP">top_p</label>
            <input id="topP" type="number" value="1" step="0.05" min="0" max="1" />
          </div>
          <div class="setting">
            <label for="minP">min_p</label>
            <input id="minP" type="number" step="0.01" min="0" max="1" value="0.05" />
          </div>
          <div class="setting">
            <label for="repeatPenalty">repeat_penalty</label>
            <input id="repeatPenalty" type="number" step="0.05" min="0" max="10" value="1.0" />
          </div>
          <div class="setting">
            <label for="stopSequences">stop</label>
            <textarea id="stopSequences" placeholder="page.chat.completion.settings.stop_sequences.placeholder_mobile" data-i18n="page.chat.completion.settings.stop_sequences.placeholder_mobile" data-i18n-attr="placeholder"></textarea>
          </div>

          <div id="sysPromptBox" class="sys-prompt">
            <div class="sys-title" data-i18n="page.chat.completion.settings.role.system_prompt">page.chat.completion.settings.role.system_prompt</div>
            <textarea id="systemPrompt" placeholder="page.chat.completion.settings.prompt.prepend_placeholder" data-i18n="page.chat.completion.settings.prompt.prepend_placeholder" data-i18n-attr="placeholder"></textarea>
          </div>
          <div id="rolePromptBox" class="sys-prompt">
            <div class="sys-title" data-i18n="page.chat.completion.settings.role.role_prompt_box_title">page.chat.completion.settings.role.role_prompt_box_title</div>
            <textarea id="rolePrompt" placeholder="page.chat.completion.settings.prompt.prepend_placeholder" data-i18n="page.chat.completion.settings.prompt.prepend_placeholder" data-i18n-attr="placeholder"></textarea>
          </div>

          <div class="setting long-setting">
            <label for="userPrefix" data-i18n="page.chat.completion.settings.template.user_prefix">page.chat.completion.settings.template.user_prefix</label>
            <textarea id="userPrefix" placeholder="page.chat.completion.settings.template.optional_placeholder" data-i18n="page.chat.completion.settings.template.optional_placeholder" data-i18n-attr="placeholder"></textarea>
          </div>
          <div class="setting long-setting">
            <label for="userSuffix" data-i18n="page.chat.completion.settings.template.user_suffix">page.chat.completion.settings.template.user_suffix</label>
            <textarea id="userSuffix" placeholder="page.chat.completion.settings.template.optional_placeholder" data-i18n="page.chat.completion.settings.template.optional_placeholder" data-i18n-attr="placeholder"></textarea>
          </div>
          <div class="setting long-setting">
            <label for="assistantPrefix" data-i18n="page.chat.completion.settings.template.assistant_prefix">page.chat.completion.settings.template.assistant_prefix</label>
            <textarea id="assistantPrefix" placeholder="page.chat.completion.settings.template.optional_placeholder" data-i18n="page.chat.completion.settings.template.optional_placeholder" data-i18n-attr="placeholder"></textarea>
          </div>
          <div class="setting long-setting">
            <label for="assistantSuffix" data-i18n="page.chat.completion.settings.template.assistant_suffix">page.chat.completion.settings.template.assistant_suffix</label>
            <textarea id="assistantSuffix" placeholder="page.chat.completion.settings.template.optional_placeholder" data-i18n="page.chat.completion.settings.template.optional_placeholder" data-i18n-attr="placeholder"></textarea>
          </div>
        </div>
      </div>

      <div class="prompt-row">
        <div class="prompt-actions">
          <button id="attachBtn" class="btn" type="button" data-i18n="page.chat.completion.action.attach">page.chat.completion.action.attach</button>
          <button id="modelRowToggle" style="width: 100%; height: 100%" class="btn icon-btn ghost" type="button" aria-label="page.chat.completion.tooltip.toggle_model_row" data-i18n="page.chat.completion.tooltip.toggle_model_row" data-i18n-attr="aria-label" aria-expanded="false">‚ò∞</button>
        </div>
        <textarea id="promptInput" placeholder="page.chat.completion.placeholder.prompt" data-i18n="page.chat.completion.placeholder.prompt" data-i18n-attr="placeholder"></textarea>
        <div class="prompt-actions">
          <button id="sendBtn" class="btn primary" type="button" data-i18n="page.chat.completion.action.send">page.chat.completion.action.send</button>
          <button id="stopBtn" class="btn danger" type="button" disabled data-i18n="page.chat.completion.action.stop">page.chat.completion.action.stop</button>
        </div>
        <input id="attachInput" type="file" style="display:none" />
      </div>
      <div class="toolbar">
        <div class="hint" id="saveHint"></div>
        <div id="attachInfo" class="attach-info" aria-live="polite">
          <span class="hint" data-i18n="page.chat.completion.attachment.selected">page.chat.completion.attachment.selected</span>
          <span id="attachName" class="name"></span>
          <button id="attachClear" class="btn icon-btn clear" type="button" aria-label="page.chat.completion.aria.clear_attachment" data-i18n="page.chat.completion.aria.clear_attachment" data-i18n-attr="aria-label">√ó</button>
        </div>
        <div class="spacer"></div>
      </div>
    </div>

    <div id="topicBackdrop" class="backdrop"></div>
    <div id="topicOverlay" class="topic-overlay" aria-hidden="true">
      <div class="topic-overlay-head">
        <div class="topic-title" data-i18n="page.chat.completion.drawer.tab.topics">page.chat.completion.drawer.tab.topics</div>
        <button id="topicOverlayClose" class="btn icon-btn" type="button" aria-label="common.close" data-i18n="common.close" data-i18n-attr="aria-label">√ó</button>
      </div>
      <div class="topic-overlay-actions">
        <button id="newTopicBtn" class="btn" type="button" data-i18n="page.chat.completion.action.new_topic">page.chat.completion.action.new_topic</button>
      </div>
      <div class="topic-overlay-body">
        <div id="topicList" class="topic-list"></div>
      </div>
    </div>

    <div id="drawerBackdrop" class="backdrop"></div>
    <aside id="sessionsDrawer" class="drawer" aria-hidden="true" inert>
      <div class="drawer-header">
        <div class="drawer-title" data-i18n="page.chat.completion.drawer.tab.sessions">page.chat.completion.drawer.tab.sessions</div>
        <button id="drawerClose" class="btn icon-btn" type="button" aria-label="common.close" data-i18n="common.close" data-i18n-attr="aria-label">√ó</button>
      </div>
      <div class="drawer-actions">
        <button id="newSessionBtn" class="btn primary" type="button" data-i18n="page.chat.completion.action.new_session">page.chat.completion.action.new_session</button>
        <button id="reloadSessionsBtn" class="btn" type="button" data-i18n="common.refresh">common.refresh</button>
        <span class="hint" id="drawerHint"></span>
      </div>
      <ul id="sessionsList" class="sessions"></ul>
    </aside>

    <div id="editModal" class="modal-wrap" aria-hidden="true" inert>
      <div class="modal-card">
        <div class="modal-head">
          <div class="modal-title" data-i18n="page.chat.completion.modal.edit.title">page.chat.completion.modal.edit.title</div>
          <button id="editClose" class="btn icon-btn" type="button" aria-label="common.close" data-i18n="common.close" data-i18n-attr="aria-label">√ó</button>
        </div>
        <div class="modal-body">
          <textarea id="editTextarea" placeholder="page.chat.completion.modal.edit.placeholder" data-i18n="page.chat.completion.modal.edit.placeholder" data-i18n-attr="placeholder"></textarea>
        </div>
        <div class="modal-actions">
          <button id="editCancel" class="btn" type="button" data-i18n="common.cancel">common.cancel</button>
          <button id="editSave" class="btn primary" type="button" data-i18n="common.save">common.save</button>
        </div>
      </div>
    </div>

    <div id="kvCacheModal" class="modal-wrap" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-head">
          <div class="modal-title" data-i18n="page.chat.completion.modal.kv_cache.title">page.chat.completion.modal.kv_cache.title</div>
          <button id="kvCacheClose" class="btn icon-btn" type="button" aria-label="common.close" data-i18n="common.close" data-i18n-attr="aria-label">√ó</button>
        </div>
        <div class="modal-body">
          <p style="color: var(--muted); font-size: 14px; margin: 0 0 16px 0;" data-i18n="page.chat.completion.modal.kv_cache.desc">page.chat.completion.modal.kv_cache.desc</p>
          <div style="display: flex; gap: 12px; justify-content: center;">
            <button id="saveKV" class="btn" type="button" style="min-width: 120px;" data-i18n="page.chat.completion.modal.kv_cache.action.save">page.chat.completion.modal.kv_cache.action.save</button>
            <button id="loadKV" class="btn" type="button" style="min-width: 120px;" data-i18n="page.chat.completion.modal.kv_cache.action.load">page.chat.completion.modal.kv_cache.action.load</button>
          </div>
        </div>
        <div class="modal-actions">
          <button id="kvCacheCancel" class="btn" type="button" data-i18n="common.close">common.close</button>
        </div>
      </div>
    </div>

    <div id="mcpToolsModal" class="modal-wrap" aria-hidden="true">
      <div class="modal-card">
        <div class="modal-head">
          <div class="modal-title" data-i18n="page.chat.completion.modal.mcp_tools.title">page.chat.completion.modal.mcp_tools.title</div>
          <button id="mcpToolsClose" class="btn icon-btn" type="button" aria-label="common.close" data-i18n="common.close" data-i18n-attr="aria-label">√ó</button>
        </div>
        <div class="modal-body">
          <div class="long-setting">
            <div class="mcp-tools-actions">
              <button id="refreshMcpTools" class="btn" type="button" data-i18n="common.refresh">common.refresh</button>
              <span id="mcpToolsStatus" class="hint"></span>
            </div>
            <div id="mcpToolsList" class="mcp-tools"></div>
          </div>
        </div>
        <div class="modal-actions">
          <button id="mcpToolsDone" class="btn primary" type="button" data-i18n="page.chat.completion.action.done">page.chat.completion.action.done</button>
        </div>
      </div>
    </div>
  </div>

  <script src="/js/i18n.js"></script>
  <script src="/js/lz-string.js"></script>
  <script src="/js/marked.min.js"></script>
  <script src="/js/highlight.min.js"></script>
  <script src="/js/completion-dom-state.js"></script>
  <script src="/js/completion-markdown.js"></script>
  <script src="/js/completion-net-tools.js"></script>
  <script src="/js/completion-ui-render.js"></script>
  <script src="/js/completion-runtime.js"></script>
  <script src="/js/completion-init.js"></script>
</body>

</html>
